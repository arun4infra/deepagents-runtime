{
  "name": "spec-builders",
  "version": "1",
  "tool_definitions": [
    {
      "name": "generate_diff",
      "runtime": {
        "script": "loaded from tools/generate_diff.py file",
        "dependencies": [
          "langchain-core"
        ]
      }
    },
    {
      "name": "propose_changes",
      "runtime": {
        "script": "loaded from tools/propose_changes.py file",
        "dependencies": [
          "langchain-core",
          "langgraph",
          "langchain"
        ]
      }
    },
    {
      "name": "validate_definition",
      "runtime": {
        "script": "loaded from tools/validate_definition.py file",
        "dependencies": [
          "jsonschema",
          "langchain-core",
          "langgraph",
          "langchain"
        ]
      }
    },
    {
      "name": "finalize_compilation",
      "runtime": {
        "script": "loaded from tools/finalize_compilation.py file",
        "dependencies": [
          "langchain-core",
          "langgraph"
        ]
      }
    },
    {
      "name": "pre_work",
      "runtime": {
        "script": "loaded from tools/pre_work.py file",
        "dependencies": [
          "langchain-core"
        ]
      }
    },
    {
      "name": "post_work",
      "runtime": {
        "script": "loaded from tools/post_work.py file",
        "dependencies": [
          "langchain-core"
        ]
      }
    }
  ],
  "nodes": [
    {
      "id": "builder_agent_orchestrator",
      "type": "Orchestrator",
      "config": {
        "name": "Builder Agent Orchestrator",
        "system_prompt": "loaded from prompts/builder_agent_orchestrator.md file",
        "model": {
          "provider": "openai",
          "model": "gpt-4.1-mini"
        },
        "tools": [
          "pre_work",
          "post_work"
        ]
      }
    },
    {
      "id": "guardrail-agent",
      "type": "Specialist",
      "config": {
        "name": "Guardrail Agent",
        "description": "Performs security and policy validation with constitutional governance authority, produces guardrail_assessment.md artifact",
        "system_prompt": "loaded from prompts/guardrail-agent.md file",
        "model": {
          "provider": "openai",
          "model": "gpt-4.1-mini"
        },
        "tools": []
      }
    },
    {
      "id": "impact-analysis-agent",
      "type": "Specialist",
      "config": {
        "name": "Impact Analysis Agent",
        "description": "Designs implementation blueprint, produces impact_assessment.md artifact",
        "system_prompt": "loaded from prompts/impact-analysis-agent.mdfile",
        "model": {
          "provider": "openai",
          "model": "gpt-4.1-mini"
        },
        "tools": []
      }
    },
    {
      "id": "workflow-spec-agent",
      "type": "Specialist",
      "config": {
        "name": "Workflow Spec Agent",
        "description": "Generates all /THE_SPEC/ directory files including constitution.md based on impact analysis guidance",
        "system_prompt": "loaded from prompts/workflow-spec-agent.mdfile",
        "model": {
          "provider": "openai",
          "model": "gpt-4.1-mini"
        },
        "tools": [
          "generate_diff",
          "propose_changes"
        ],
        "state_schema": {
          "proposed_changes": {
            "type": "list",
            "item_type": "dict",
            "reducer": "add_messages"
          }
        }
      }
    },
    {
      "id": "agent-spec-agent",
      "type": "Specialist",
      "config": {
        "name": "Agent Spec Agent",
        "description": "Generates all /THE_CAST/ directory files with constitutional compliance validation for individual agents",
        "system_prompt": "loaded from prompts/agent-spec-agent.md file",
        "model": {
          "provider": "openai",
          "model": "gpt-4.1-mini"
        },
        "tools": [
          "generate_diff",
          "propose_changes"
        ],
        "state_schema": {
          "proposed_changes": {
            "type": "list",
            "item_type": "dict",
            "reducer": "add_messages"
          }
        }
      }
    },
    {
      "id": "multiagent-compiler-agent",
      "type": "Specialist",
      "config": {
        "name": "Multi-Agent Compiler Agent",
        "description": "Performs final validation and compilation, produces definition.json",
        "system_prompt": "loaded from prompts/multiagent-compiler-agent.md file",
        "model": {
          "provider": "openai",
          "model": "gpt-4.1-mini"
        },
        "tools": [
          "validate_definition",
          "finalize_compilation"
        ]
      }
    }
  ],
  "edges": [
    {
      "source": "builder_agent_orchestrator",
      "target": "guardrail-agent",
      "type": "orchestrator"
    },
    {
      "source": "builder_agent_orchestrator",
      "target": "impact-analysis-agent",
      "type": "specialists"
    },
    {
      "source": "builder_agent_orchestrator",
      "target": "workflow-spec-agent",
      "type": "specialists"
    },
    {
      "source": "builder_agent_orchestrator",
      "target": "agent-spec-agent",
      "type": "specialists"
    },
    {
      "source": "builder_agent_orchestrator",
      "target": "multiagent-compiler-agent",
      "type": "specialists"
    }
  ]
}